{% extends "../base.html" %}
{% load static %}


{% block title %}Goal Planner{% endblock %}

{% block content %}
<header class="dashboard-header">
    <div class="streak-icon">🔥</div>
    <img src="{% static 'images/default-profile.png' %}" alt="{{ user.get_full_name }}" />
    <h3>Welcome<br>{{ user.get_full_name|default:user.username }}</h3>
</header>

<div class="search-bar">
    <input type="text" placeholder="Search plans..." />
</div>

<div class="section-title">Goal Categories</div>
<div class="categories">
    <button class="category-button" data-category="all">🎯<br>All</button>
    <button class="category-button" data-category="fitness">💪<br>Fitness</button>
    <button class="category-button" data-category="health">❤️<br>Health</button>
    <button class="category-button" data-category="personal">🎯<br>Personal</button>
    <button class="category-button" data-category="career">💼<br>Career</button>
    <button class="category-button" data-category="financial">💰<br>Financial</button>
    <button class="category-button" data-category="spiritual">🙏<br>Spiritual</button>
</div>

<div class="section-title">Featured Plans</div>
<div class="plans">
    {% for plan in plans %}
    <div class="plan-group" data-category="{{ plan.category }}">
        <a href="{% url 'core:plan_detail' plan.id %}" class="plan-link">
            <div class="plan-card">
                <img src="{{ plan.image.url }}" alt="{{ plan.title }}">
                <div class="plan-details">
                    <p class="plan-title">{{ plan.title }}</p>
                    <p class="plan-subtitle">{{ plan.difficulty }}</p>
                    <p class="plan-rating">⭐ {{ plan.rating }}</p>
                </div>
            </div>
        </a>
    </div>
    {% empty %}
    <p class="text-center text-muted">No plans available yet.</p>
    {% endfor %}
</div>

{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll(".category-button");
    const planGroups = document.querySelectorAll(".plan-group");

    buttons.forEach(button => {
        button.addEventListener("click", () => {
            const category = button.getAttribute("data-category");
            planGroups.forEach(group => {
                if (category === "all" || group.getAttribute("data-category") === category) {
                    group.style.display = "block";
                } else {
                    group.style.display = "none";
                }
            });
        });
    });
});
</script>
{% endblock %}
